(window.webpackJsonp_gp_web_frontend=window.webpackJsonp_gp_web_frontend||[]).push([["gtm-data-layer"],{"./src/ts/components/gtm-data-layer/gtm-data-layer.ts":(e,t,a)=>{"use strict";a.r(t),a.d(t,{gtmDataLayerComponent:()=>i,init:()=>n});var o=a("../shared-types/frontend/core/store.ts");const i=e=>({bindEvents:()=>(window.dataLayer=window.dataLayer||[],(e=>{window.dataLayer=window.dataLayer||[];(()=>{let t;e.subscribe(()=>{const{dataLayerPush:a,history:i}=e.getState();t!==i[o.U.DataLayerPush]&&(t=i[o.U.DataLayerPush],window.dataLayer.push({action:void 0,label:void 0,category:void 0,event:void 0},a))})})();const t=e.subscribe(()=>{var a,o;const i=e.getState();if(i.crm.receive){let e;if(null===(a=i.crm.receive)||void 0===a?void 0:a.message){e=((null===(o=i.crm.receive.message)||void 0===o?void 0:o.split(",").find(e=>e.includes("id::")))||"").replace("id::","")}const n={action:"click - sign-up",label:"newsletter",event:"newsletter-sign-up",category:"TO Engagement",crmHashedEmail:e};window.dataLayer.push({action:void 0,label:void 0,category:void 0,event:void 0},n),t()}})})(e),document.addEventListener("click",e=>{const t=e.target;if(!t)return;const a=t.closest("[data-data-layer]");if(!a)return;const{dataLayer:o}=a.dataset||{};if(o)try{const e=JSON.parse(o);switch(e.triggerOn){case 0:window.dataLayer.push({action:void 0,label:void 0,category:void 0,event:void 0,socialAction:void 0,socialNetwork:void 0,socialTarget:void 0},e.payload)}}catch(e){}}),{})}),n=(e,t)=>{const a=Math.floor(1e4*Math.random());return{listeners:i(t).bindEvents(),componentId:"gtm-data-layer-"+a}}}}]);