(window.webpackJsonp_gp_web_frontend=window.webpackJsonp_gp_web_frontend||[]).push([["footer-newsletter"],{"./src/ts/components/footer-newsletter/footer-newsletter.ts":(t,e,n)=>{"use strict";n.r(e),n.d(e,{footerNewsletterComponent:()=>o,init:()=>c});var r=n("../shared-types/frontend/core/store.ts"),s=n("./src/ts/utils/crm.ts"),i=n("./src/ts/utils/inview.ts");const o=()=>{const t={subscribe:(e,n)=>{const r=n.subscribe(()=>{const s=n.getState();e.button.disabled=!1,s.crm.receive?(r(),t.subscriptionSuccess(e,s.crm.receive.type)):s.crm.error&&t.subscriptionError(e)})},afterStart:(e,n)=>{var s;const o=t.subscriptionRequest(e,n);return null===(s=e.form)||void 0===s||s.addEventListener("submit",o),t.subscribe(e,n),(0,i.W0)(e.rootElement).then(()=>{n.dispatch({type:r.U.DataLayerPush,payload:{action:"zone - footer",label:"newsletter",event:"in-view",category:"TO Impression"}})}),o},subscriptionSuccess:(t,e)=>{t.rootElement.classList.replace("loading","success"),"footer"===e&&(0,s.W)(e)},subscriptionError:t=>{t.rootElement.classList.replace("loading","error")},subscriptionRequest:(t,e)=>n=>{var r;n.preventDefault(),t.rootElement.classList.add("loading"),t.button.disabled=!0,(0,s.C)(e,{email:null===(r=t.emailInput)||void 0===r?void 0:r.value,element:"newsletter-footer",referrer:window.location.href,copyVersion:"0001"})},bindEvents:(e,n)=>{const r=(t=>({rootElement:t,form:t.querySelector("form"),emailInput:t.querySelector("input"),button:t.querySelector('input[type="submit"]')}))(e);return{subscriptionRequestListener:t.afterStart(r,n)}}};return t},c=(t,e)=>{const n=Math.floor(1e4*Math.random());return{listeners:o().bindEvents(t,e),componentId:"footer-newsletter-"+n}}},"./src/ts/config/config.ts":(t,e,n)=>{"use strict";n.d(e,{p:()=>i,u:()=>o});var r=n("./src/ts/utils/config-utils.ts");let s={};const i=()=>{const t=(0,r.P)(),e=t.site||"uk-london",[n,i]=e.split("-"),o=t.locale||"en-GB",c=t.currency_symbol||"Â£",a=t.current_commit||null,l=t.graffiti||null,u=t.discover||null,d=t.auth||null,p=t.pageUID||null;return s={...s,site:e,city:i,country:n,locale:o,currencySymbol:c,currentCommit:a,graffiti:l,discover:u,auth:d,pageUid:p},s},o=t=>{var e;return null!==(e=s[t])&&void 0!==e?e:null}},"./src/ts/core/client.ts":(t,e,n)=>{"use strict";n.d(e,{uj:()=>c,Ef:()=>l,iu:()=>u});var r=n("../shared-types/frontend/core/store.ts"),s=n("./src/ts/config/settings.ts");let i,o=!1;const c=()=>window.innerWidth>=window.innerHeight?"landscape":"portrait",a=t=>{const{client:{breakpoint:e}}=t.getState(),n=(({width:t,currentBreakpoint:e,breakpoints:n=s.aj})=>(Object.entries(n).some(([n,{min_width:r,max_width:s}])=>{const i={min:!1,max:!1};return(t>=r||0===r)&&(i.min=!0),(t<=s||0===s)&&(i.max=!0),!(!i.min||!i.max||n===e)&&(e=n,!0)}),e))({width:window.innerWidth,currentBreakpoint:e});e!==n&&t.dispatch({type:r.U.ClientBreakpoint,payload:{breakpoint:n}})},l=()=>{if(o)return;const t=window.gpStore;i=t,(t=>{const e=()=>{a(t)};window.matchMedia(`(min-width: ${s.aj.sm.min_width}px)`).addListener(e),window.matchMedia(`(min-width: ${s.aj.md.min_width}px)`).addListener(e),window.matchMedia(`(min-width: ${s.aj.lg.min_width}px)`).addListener(e)})(t),(t=>{a(t)})(t),o=!0},u=()=>i.getState().client.breakpoint},"./src/ts/utils/config-utils.ts":(t,e,n)=>{"use strict";n.d(e,{P:()=>r,R:()=>s});const r=()=>{const t={};return document.querySelectorAll("meta").forEach(e=>{const n=e.name?e.name:e.getAttribute("property")||!1;n&&(t[n]=e.content?e.content:e.dataset)}),t},s=(t=document)=>t.querySelector("body").dataset.pageType},"./src/ts/utils/inview.ts":(t,e,n)=>{"use strict";n.d(e,{oe:()=>r,oO:()=>s,W0:()=>i});const r=t=>{if(!t)return!1;const e=t.getBoundingClientRect(),n=window.innerHeight||document.documentElement.clientHeight,r=window.innerWidth||document.documentElement.clientWidth,s=e.top<=n&&e.top+e.height>=0,i=e.left<=r&&e.left+e.width>=0;return s&&i};function s({element:t,observerOptions:e={},isInViewportCallback:n,isNotInViewportCallback:r}){new IntersectionObserver((t,e)=>{t.forEach(t=>{t.isIntersecting&&n&&(r||e.unobserve(t.target),n(t)),!t.isIntersecting&&r&&(n||e.unobserve(t.target),r(t))})},e).observe(t)}function i(t,e){return t?new Promise(n=>{s({element:t,observerOptions:e,isInViewportCallback:n})}):Promise.reject()}},"../shared-types/frontend/components/newsletter/subscription-status.ts":(t,e,n)=>{"use strict";var r;n.d(e,{y:()=>r}),function(t){t.SignedUp="_TO_Newsletter_SignedUp",t.Dismissed="_TO_Newsletter_Dismissed",t.PageViewCount="_TO_Newsletter_PageViewCount"}(r||(r={}))}}]);